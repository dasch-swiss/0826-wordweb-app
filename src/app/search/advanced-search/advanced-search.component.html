<div class="search-container" fxLayout="column" fxLayout.gt-sm="row" fxLayoutAlign.gt-sm="center start" fxLayoutGap="30px">

    <mat-card fxFlex.gt-sm="350px">
        <mat-card-content>

            <form [formGroup]="form" (ngSubmit)="search()" fxLayout="column">

                <table>
                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Text</mat-label>
                                <input matInput formControlName="text">
                                <button *ngIf="form.get('text').value" type="button" mat-button matSuffix
                                        mat-icon-button aria-label="Clear" (click)="clear('text')">
                                    <mat-icon>close</mat-icon>
                                </button>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('text')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Title</mat-label>
                                <input matInput formControlName="bookTitle" placeholder="e.g. Hamlet">
                                <button *ngIf="form.get('bookTitle').value" type="button" mat-button matSuffix
                                        mat-icon-button aria-label="Clear" (click)="clear('bookTitle')">
                                    <mat-icon>close</mat-icon>
                                </button>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('bookTitle')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Author</mat-label>
                                <input matInput formControlName="author" placeholder="Family name">
                                <button *ngIf="form.get('author').value" type="button" mat-button matSuffix
                                        mat-icon-button aria-label="Clear" (click)="clear('author')">
                                    <mat-icon>close</mat-icon>
                                </button>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('author')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Author's gender</mat-label>
                                <mat-select formControlName="gender">
                                    <mat-option value="">-</mat-option>
                                    <mat-option *ngFor="let gender of genders" [value]="gender.id">
                                        {{gender.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td class="min">
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Lexia</mat-label>
                                <input matInput formControlName="lexia" placeholder="e.g. to be or not to be">
                                <button *ngIf="form.get('lexia').value" type="button" mat-button matSuffix
                                        mat-icon-button aria-label="Clear" (click)="clear('lexia')">
                                    <mat-icon>close</mat-icon>
                                </button>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('lexia')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Date</mat-label>
                                <input matInput formControlName="createdDate" placeholder="1662 or 1662-1664">
                                <button *ngIf="form.get('createdDate').value" type="button" mat-button matSuffix
                                        mat-icon-button aria-label="Clear" (click)="clear('createdDate')">
                                    <mat-icon>close</mat-icon>
                                </button>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('createdDate')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Marking</mat-label>
                                <mat-select formControlName="marking">
                                    <mat-option value="">-</mat-option>
                                    <mat-option *ngFor="let marking of markings" [value]="marking.id">
                                        {{marking.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('marking')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Function</mat-label>
                                <mat-select formControlName="function">
                                    <mat-option value="">-</mat-option>
                                    <mat-option *ngFor="let functionVoice of functionVoices" [value]="functionVoice.id">
                                        {{functionVoice.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('function')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Language</mat-label>
                                <mat-select formControlName="language">
                                    <mat-option value="">-</mat-option>
                                    <mat-option *ngFor="let language of languages" [value]="language.id">
                                        {{language.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('language')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>First performance: Company</mat-label>
                                <mat-select formControlName="performedCompany">
                                    <mat-option value="">-</mat-option>
                                    <mat-option *ngFor="let company of companies" [value]="company.id">
                                        {{company.hasCompanyTitle}}
                                    </mat-option>
                                </mat-select>
<!--                                <input matInput formControlName="performedCompany" (keydown.escape)="clear('performedCompany')">-->
<!--                                <button *ngIf="form.get('performedCompany').value" type="button" mat-button matSuffix-->
<!--                                        mat-icon-button aria-label="Clear" (click)="clear('performedCompany')">-->
<!--                                    <mat-icon>close</mat-icon>-->
<!--                                </button>-->
                            </mat-form-field>
<!--                            <button type="button" (click)="selectCompany()">Select company</button>-->
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('performedCompany')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>First performance: Venue</mat-label>
                                <mat-select formControlName="performedVenue">
                                    <mat-option value="">-</mat-option>
                                    <mat-option *ngFor="let venue of venues" [value]="venue.id">
                                        {{venue.value}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('performedVenue')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>First performance: Actor</mat-label>
                                <mat-select formControlName="performedActor">
                                    <mat-option value="">-</mat-option>
                                    <mat-option *ngFor="let actor of actors" [value]="actor.id">
                                        <span *ngIf="actor.hasFirstName">{{actor.hasFirstName}}</span> {{actor.hasLastName}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('performedActor')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <mat-form-field>
                                <mat-label>Genre</mat-label>
                                <mat-select formControlName="genre">
                                    <mat-option value="">-</mat-option>
                                    <mat-option *ngFor="let genre of genres" [value]="genre.id">
                                        {{genre.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('genre')">help</mat-icon>
                        </td>
                    </tr>

                    <tr>
                        <td class="play-toggle">
                            <mat-slide-toggle formControlName="plays" [color]="'warn'" (ngModelChange)="onChange($event)">
                                Show only plays
                            </mat-slide-toggle>
                        </td>
                        <td class="min">
                            <mat-icon matSuffix (click)="getHelpText('plays')">help</mat-icon>
                        </td>
                    </tr>

                </table>

                <!--    For a reference-->
                <!--                <div>-->
                <!--                    <div style="background-color: white; position: relative; display: inline-block; top: 0.5rem; left: 0.5rem; padding: 0 0.5rem; color: darkgray;">First Performed</div>-->
                <!--                </div>-->
                <!--                <div style="border: 1px solid lightgray;">-->
                <!--                    <div style="padding: 0.5rem;">-->
                <!--                        <button mat-button>Test</button>-->
                <!--                    </div>-->
                <!--                </div>-->

                <div class="buttons">
                    <button class="search-btn" type="submit" mat-flat-button>SEARCH</button>
                    <button class="clear-btn" type="button" mat-flat-button (click)="reset()">Clear search</button>
                </div>

            </form>

        </mat-card-content>
    </mat-card>

    <app-results #results></app-results>

</div>

